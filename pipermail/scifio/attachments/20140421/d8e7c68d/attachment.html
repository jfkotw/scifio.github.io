<tt>
&lt;div&nbsp;dir=&quot;ltr&quot;&gt;Hi&nbsp;Adam,&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;[CCing&nbsp;the&nbsp;SCIFIO&nbsp;and&nbsp;OME&nbsp;users&nbsp;mailing&nbsp;lists,&nbsp;as&nbsp;this&nbsp;discussion&nbsp;will&nbsp;be&nbsp;of&nbsp;interest&nbsp;to&nbsp;others.]&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&gt;&nbsp;This&nbsp;bug:&lt;/div&gt;&lt;div&gt;&gt;&nbsp;&lt;a&nbsp;href=&quot;https://groups.google.com/forum/#!topic/fiji-users/7qLsi-V-jvs&quot;&gt;https://groups.google.com/forum/#!topic/fiji-users/7qLsi-V-jvs&lt;/a&gt;&lt;/div&gt;<br>
<br>
&lt;div&gt;&gt;&nbsp;(Bio-Formats&nbsp;does&nbsp;not&nbsp;export&nbsp;a&nbsp;tiff&nbsp;using&nbsp;the&nbsp;BigTIFF&nbsp;library&lt;/div&gt;&lt;div&gt;&gt;&nbsp;automatically&nbsp;when&nbsp;a&nbsp;file&nbsp;will&nbsp;be&nbsp;bigger&nbsp;than&nbsp;4GB)&nbsp;is&nbsp;still&nbsp;a&nbsp;bug&nbsp;in&lt;/div&gt;&lt;div&gt;&gt;&nbsp;the&nbsp;latest&nbsp;version&nbsp;of&nbsp;FIJI&nbsp;and&nbsp;the&nbsp;latest&nbsp;build&nbsp;of&nbsp;Bio-Formats&lt;/div&gt;<br>
<br>
&lt;div&gt;&gt;&nbsp;installed&nbsp;separately&nbsp;in&nbsp;ImageJ,&nbsp;though&nbsp;you&nbsp;hoped&nbsp;to&nbsp;fix&nbsp;it&nbsp;in&nbsp;2012.&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;Right.&nbsp;My&nbsp;apologies&nbsp;that&nbsp;that&nbsp;problem&nbsp;has&nbsp;continued&nbsp;to&nbsp;exist&nbsp;for&nbsp;so&nbsp;long.&nbsp;IMO,&nbsp;Bio-Formats&nbsp;should&nbsp;auto-detect&nbsp;whether&nbsp;the&nbsp;output&nbsp;file&nbsp;might&nbsp;be&nbsp;large&nbsp;enough&nbsp;to&nbsp;be&nbsp;need&nbsp;BigTIFF,&nbsp;and&nbsp;act&nbsp;accordingly.&nbsp;But&nbsp;the&nbsp;current&nbsp;5.0.1&nbsp;release&nbsp;does&nbsp;not.&lt;/div&gt;<br>
<br>
&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&gt;&nbsp;You&nbsp;mention&nbsp;in&nbsp;late&nbsp;2013&nbsp;on&nbsp;stackoverflow&nbsp;that&nbsp;SCIFIO&nbsp;should&nbsp;solve&lt;/div&gt;&lt;div&gt;&gt;&nbsp;this&nbsp;problem:&lt;/div&gt;&lt;div&gt;&gt;&nbsp;&lt;a&nbsp;href=&quot;http://stackoverflow.com/questions/18986368/java-how-to-write-a-very-large-20-000x20-000-px-or-larger-tif-image/19034370#19034370&quot;&gt;http://stackoverflow.com/questions/18986368/java-how-to-write-a-very-large-20-000x20-000-px-or-larger-tif-image/19034370#19034370&lt;/a&gt;&lt;/div&gt;<br>
<br>
&lt;div&gt;&gt;&nbsp;but&nbsp;that&nbsp;does&nbsp;not&nbsp;yet&nbsp;seem&nbsp;to&nbsp;be&nbsp;the&nbsp;case&nbsp;as&nbsp;FIJI,&nbsp;for&nbsp;which&nbsp;SCIFIO&lt;/div&gt;&lt;div&gt;&gt;&nbsp;claims&nbsp;to&nbsp;do&nbsp;the&nbsp;I/O,&nbsp;still&nbsp;has&nbsp;this&nbsp;bug&nbsp;when&nbsp;trying&nbsp;to&nbsp;write&nbsp;out&nbsp;a&lt;/div&gt;&lt;div&gt;&gt;&nbsp;tiff&nbsp;&gt;4GB.&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;<br>
<br>
Actually,&nbsp;that&nbsp;SO&nbsp;question&nbsp;is&nbsp;about&nbsp;a&nbsp;different&nbsp;issue:&nbsp;huge&nbsp;planes.&nbsp;The&nbsp;BigTIFF&nbsp;format&nbsp;is&nbsp;actually&nbsp;needed&nbsp;even&nbsp;for&nbsp;more&nbsp;modest&nbsp;size&nbsp;planes,&nbsp;when&nbsp;you&nbsp;simply&nbsp;have&nbsp;many&nbsp;of&nbsp;them,&nbsp;which&nbsp;result&nbsp;in&nbsp;a&nbsp;TIFF&nbsp;file&nbsp;of&nbsp;more&nbsp;than&nbsp;4GB&nbsp;in&nbsp;size.&nbsp;Regular&nbsp;TIFF&nbsp;uses&nbsp;32-bit&nbsp;offsets,&nbsp;so&nbsp;as&nbsp;soon&nbsp;as&nbsp;the&nbsp;TIFF&nbsp;file&nbsp;gets&nbsp;over&nbsp;4GB,&nbsp;there&nbsp;is&nbsp;no&nbsp;way&nbsp;to&nbsp;indicate&nbsp;that&nbsp;an&nbsp;offset&nbsp;should&nbsp;go&nbsp;deeper&nbsp;into&nbsp;the&nbsp;file&nbsp;than&nbsp;that.&nbsp;BigTIFF&nbsp;solves&nbsp;this&nbsp;problem&nbsp;by&nbsp;using&nbsp;64-bit&nbsp;offsets.&lt;/div&gt;<br>
<br>
&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&gt;&nbsp;Changing&nbsp;Line&nbsp;132&nbsp;in&nbsp;TIffWriter.JAVA&nbsp;to&nbsp;say:&nbsp;isBigTiff&nbsp;=&nbsp;true;&nbsp;would&lt;/div&gt;&lt;div&gt;&gt;&nbsp;simply&nbsp;force&nbsp;writing&nbsp;BigTIFFs&nbsp;all&nbsp;the&nbsp;time,&nbsp;which&nbsp;would&nbsp;solve&nbsp;the&lt;/div&gt;&lt;div&gt;&gt;&nbsp;problem&nbsp;for&nbsp;me&nbsp;(although&nbsp;I&nbsp;realize&nbsp;cause&nbsp;other&nbsp;problems&nbsp;for&nbsp;others!)&lt;/div&gt;<br>
<br>
&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;Well,&nbsp;there&nbsp;is&nbsp;also&nbsp;an&nbsp;API&nbsp;method&nbsp;in&nbsp;TiffWriter:&nbsp;setBigTiff(true).&nbsp;But&nbsp;of&nbsp;course&nbsp;you&nbsp;have&nbsp;to&nbsp;write&nbsp;a&nbsp;little&nbsp;program&nbsp;in&nbsp;order&nbsp;to&nbsp;use&nbsp;it;&nbsp;there&nbsp;is&nbsp;no&nbsp;built-in&nbsp;method&nbsp;in&nbsp;the&nbsp;ImageJ&nbsp;user&nbsp;interface&nbsp;to&nbsp;enable&nbsp;that&nbsp;option.&nbsp;And&nbsp;it&nbsp;is&nbsp;off&nbsp;by&nbsp;default.&lt;/div&gt;<br>
<br>
&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&gt;&nbsp;However,&nbsp;I&nbsp;cannot&nbsp;find&nbsp;a&nbsp;way&nbsp;to&nbsp;change&nbsp;this&nbsp;java&nbsp;file&nbsp;and&nbsp;propagate&lt;/div&gt;&lt;div&gt;&gt;&nbsp;the&nbsp;change&nbsp;to&nbsp;within&nbsp;ImageJ/FIJI.&nbsp; When&nbsp;I&nbsp;compile&nbsp;the&nbsp;new&lt;/div&gt;&lt;div&gt;&gt;&nbsp;TiffWriter.java&nbsp;in&nbsp;ImageJ&nbsp;I&nbsp;get&nbsp;hundreds&nbsp;of&nbsp;errors&nbsp;(see&nbsp;attached&nbsp;log&lt;/div&gt;<br>
<br>
&lt;div&gt;&gt;&nbsp;from&nbsp;ImageJ).&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;I&nbsp;am&nbsp;not&nbsp;sure&nbsp;why&nbsp;you&nbsp;are&nbsp;seeing&nbsp;those&nbsp;errors.&nbsp;I&nbsp;would&nbsp;need&nbsp;to&nbsp;know&nbsp;more&nbsp;about&nbsp;how&nbsp;you&nbsp;were&nbsp;trying&nbsp;to&nbsp;build&nbsp;the&nbsp;system.&nbsp;The&nbsp;best&nbsp;ways&nbsp;to&nbsp;build&nbsp;Bio-Formats&nbsp;are&nbsp;with&nbsp;either&nbsp;Ant&nbsp;(&quot;ant&nbsp;jars&quot;&nbsp;from&nbsp;top&nbsp;level&nbsp;works)&nbsp;or&nbsp;Maven&nbsp;(e.g.,&nbsp;&quot;mvn&quot;&nbsp;from&nbsp;top&nbsp;level).&lt;/div&gt;<br>
<br>
&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&gt;&nbsp;What&nbsp;am&nbsp;I&nbsp;missing&nbsp;and/or&nbsp;is&nbsp;there&nbsp;any&nbsp;simple&nbsp;way&nbsp;to&nbsp;solve&nbsp;this&nbsp;problem&lt;/div&gt;&lt;div&gt;&gt;&nbsp;and/or&nbsp;fix&nbsp;the&nbsp;bug?&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;Earlier&nbsp;today,&nbsp;Mark&nbsp;Hiner&nbsp;released&nbsp;a&nbsp;new&nbsp;version&nbsp;of&nbsp;SCIFIO&nbsp;that&nbsp;automatically&nbsp;enables&nbsp;BigTIFF&nbsp;as&nbsp;needed:&lt;/div&gt;<br>
<br>
&lt;div&gt; &nbsp;  &lt;a&nbsp;href=&quot;http://scif.io/pipermail/scifio/2014-April/000067.html&quot;&gt;http://scif.io/pipermail/scifio/2014-April/000067.html&lt;/a&gt;&lt;/div&gt;&lt;div&gt; &nbsp; &nbsp;&lt;a&nbsp;href=&quot;http://maven.imagej.net/content/groups/public/io/scif/scifio/0.11.0/&quot;&gt;http://maven.imagej.net/content/groups/public/io/scif/scifio/0.11.0/&lt;/a&gt;&lt;br&gt;<br>
<br>
&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;We&nbsp;are&nbsp;close&nbsp;to&nbsp;having&nbsp;Fiji&nbsp;use&nbsp;SCIFIO&nbsp;for&nbsp;its&nbsp;image&nbsp;I/O&nbsp;by&nbsp;default;&nbsp;once&nbsp;that&nbsp;happens,&nbsp;opening&nbsp;and&nbsp;saving&nbsp;large&nbsp;images&nbsp;should&nbsp;&quot;just&nbsp;work&quot;&nbsp;even&nbsp;when&nbsp;they&nbsp;are&nbsp;larger&nbsp;than&nbsp;4GB&nbsp;in&nbsp;size.&lt;/div&gt;<br>
<br>
&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;Regards,&lt;/div&gt;&lt;div&gt;Curtis&lt;/div&gt;&lt;/div&gt;&lt;div&nbsp;class=&quot;gmail_extra&quot;&gt;&lt;br&gt;&lt;br&gt;&lt;div&nbsp;class=&quot;gmail_quote&quot;&gt;On&nbsp;Wed,&nbsp;Apr&nbsp;16,&nbsp;2014&nbsp;at&nbsp;4:03&nbsp;PM,&nbsp;Adam&nbsp;Packer&nbsp;&lt;span&nbsp;dir=&quot;ltr&quot;&gt;&lt;&lt;a&nbsp;href=&quot;mailto:a.packer@ucl.ac.uk&quot;&nbsp;target=&quot;_blank&quot;&gt;a.packer@ucl.ac.uk&lt;/a&gt;&gt;&lt;/span&gt;&nbsp;wrote:&lt;br&gt;<br>
<br>
&lt;blockquote&nbsp;class=&quot;gmail_quote&quot;&nbsp;style=&quot;margin:0&nbsp;0&nbsp;0&nbsp;.8ex;border-left:1px&nbsp;#ccc&nbsp;solid;padding-left:1ex&quot;&gt;&lt;div&nbsp;dir=&quot;ltr&quot;&gt;Dear&nbsp;Curtis&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;This&nbsp;bug:&lt;br&gt;&lt;/div&gt;&lt;div&gt;&lt;a&nbsp;href=&quot;https://groups.google.com/forum/#!topic/fiji-users/7qLsi-V-jvs&quot;&nbsp;target=&quot;_blank&quot;&gt;https://groups.google.com/forum/#!topic/fiji-users/7qLsi-V-jvs&lt;/a&gt;&lt;br&gt;<br>
<br>
&lt;/div&gt;&lt;div&gt;<br>
(Bio-Formats&nbsp;does&nbsp;not&nbsp;export&nbsp;a&nbsp;tiff&nbsp;using&nbsp;the&nbsp;BigTIFF&nbsp;library&nbsp;automatically&nbsp;when&nbsp;a&nbsp;file&nbsp;will&nbsp;be&nbsp;bigger&nbsp;than&nbsp;4GB)&nbsp;is&nbsp;still&nbsp;a&nbsp;bug&nbsp;in&nbsp;the&nbsp;latest&nbsp;version&nbsp;of&nbsp;FIJI&nbsp;and&nbsp;the&nbsp;latest&nbsp;build&nbsp;of&nbsp;Bio-Formats&nbsp;installed&nbsp;separately&nbsp;in&nbsp;ImageJ,&nbsp;though&nbsp;you&nbsp;hoped&nbsp;to&nbsp;fix&nbsp;it&nbsp;in&nbsp;2012.&lt;/div&gt;<br>
<br>
<br>
&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;You&nbsp;mention&nbsp;in&nbsp;late&nbsp;2013&nbsp;on&nbsp;stackoverflow&nbsp;that&nbsp;SCIFIO&nbsp;should&nbsp;solve&nbsp;this&nbsp;problem:&lt;/div&gt;&lt;div&gt;&lt;a&nbsp;href=&quot;http://stackoverflow.com/questions/18986368/java-how-to-write-a-very-large-20-000x20-000-px-or-larger-tif-image/19034370#19034370&quot;&nbsp;target=&quot;_blank&quot;&gt;http://stackoverflow.com/questions/18986368/java-how-to-write-a-very-large-20-000x20-000-px-or-larger-tif-image/19034370#19034370&lt;/a&gt;&lt;br&gt;<br>
<br>
<br>
&lt;/div&gt;&lt;div&gt;but&nbsp;that&nbsp;does&nbsp;not&nbsp;yet&nbsp;seem&nbsp;to&nbsp;be&nbsp;the&nbsp;case&nbsp;as&nbsp;FIJI,&nbsp;for&nbsp;which&nbsp;SCIFIO&nbsp;claims&nbsp;to&nbsp;do&nbsp;the&nbsp;I/O,&nbsp;still&nbsp;has&nbsp;this&nbsp;bug&nbsp;when&nbsp;trying&nbsp;to&nbsp;write&nbsp;out&nbsp;a&nbsp;tiff&nbsp;&gt;4GB.&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;Changing&nbsp;Line&nbsp;132&nbsp;in&nbsp;TIffWriter.JAVA&nbsp;to&nbsp;say:&lt;/div&gt;<br>
<br>
<br>
&lt;div&gt;isBigTiff&nbsp;=&nbsp;true;&lt;/div&gt;&lt;div&gt;would&nbsp;simply&nbsp;force&nbsp;writing&nbsp;BigTIFFs&nbsp;all&nbsp;the&nbsp;time,&nbsp;which&nbsp;would&nbsp;solve&nbsp;the&nbsp;problem&nbsp;for&nbsp;me&nbsp;(although&nbsp;I&nbsp;realize&nbsp;cause&nbsp;other&nbsp;problems&nbsp;for&nbsp;others!)&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;However,&nbsp;I&nbsp;cannot&nbsp;find&nbsp;a&nbsp;way&nbsp;to&nbsp;change&nbsp;this&nbsp;java&nbsp;file&nbsp;and&nbsp;propagate&nbsp;the&nbsp;change&nbsp;to&nbsp;within&nbsp;ImageJ/FIJI.&nbsp; When&nbsp;I&nbsp;compile&nbsp;the&nbsp;new&nbsp;TiffWriter.java&nbsp;in&nbsp;ImageJ&nbsp;I&nbsp;get&nbsp;hundreds&nbsp;of&nbsp;errors&nbsp;(see&nbsp;attached&nbsp;log&nbsp;from&nbsp;ImageJ).&lt;/div&gt;<br>
<br>
<br>
&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;What&nbsp;am&nbsp;I&nbsp;missing&nbsp;and/or&nbsp;is&nbsp;there&nbsp;any&nbsp;simple&nbsp;way&nbsp;to&nbsp;solve&nbsp;this&nbsp;problem&nbsp;and/or&nbsp;fix&nbsp;the&nbsp;bug?&lt;br&gt;&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;All&nbsp;the&nbsp;best,&lt;/div&gt;&lt;div&gt;Adam&nbsp;Packer&lt;/div&gt;&lt;div&gt;University&nbsp;College&nbsp;London&lt;/div&gt;&lt;/div&gt;<br>
<br>
<br>
&lt;/blockquote&gt;&lt;/div&gt;&lt;br&gt;&lt;/div&gt;<br>

</tt>
