<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [SCIFIO] Your visit and Bioformats
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:scifio%40scif.io?Subject=Re%3A%20%5BSCIFIO%5D%20Your%20visit%20and%20Bioformats&In-Reply-To=%3C74b086d2194ce4.55b1004c%40wiscmail.wisc.edu%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="000269.html">
   <LINK REL="Next"  HREF="000268.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[SCIFIO] Your visit and Bioformats</H1>
    <B>Kevin W Eliceiri</B> 
    <A HREF="mailto:scifio%40scif.io?Subject=Re%3A%20%5BSCIFIO%5D%20Your%20visit%20and%20Bioformats&In-Reply-To=%3C74b086d2194ce4.55b1004c%40wiscmail.wisc.edu%3E"
       TITLE="[SCIFIO] Your visit and Bioformats">eliceiri at wisc.edu
       </A><BR>
    <I>Thu Jul 23 14:55:08 CDT 2015</I>
    <P><UL>
        <LI>Previous message: <A HREF="000269.html">[SCIFIO] Your visit and Bioformats
</A></li>
        <LI>Next message: <A HREF="000268.html">[SCIFIO] Your visit and Bioformats
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#270">[ date ]</a>
              <a href="thread.html#270">[ thread ]</a>
              <a href="subject.html#270">[ subject ]</a>
              <a href="author.html#270">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Great,k

On 07/23/15, &quot;Wietholt, Christian&quot;  wrote:
&gt;<i> 
</I>&gt;<i> 
</I>&gt;<i> 
</I>&gt;<i> 
</I>&gt;<i> Hi Curtis, 
</I>&gt;<i> 
</I>&gt;<i> 
</I>&gt;<i> 
</I>&gt;<i> Thank you very much for your very detailed answer, I really appreciate the support. We will discuss this in the team hopefully this week and decide on the best option for us soon. 
</I>&gt;<i> 
</I>&gt;<i> 
</I>&gt;<i> 
</I>&gt;<i> Best Regards, 
</I>&gt;<i> 
</I>&gt;<i> 
</I>&gt;<i> 
</I>&gt;<i> Christian
</I>&gt;<i> 
</I>&gt;<i> 
</I>&gt;<i> 
</I>&gt;<i> Christian Wietholt, Ph.D. | Product Manager, Life Sciences
</I>&gt;<i> 
</I>&gt;<i> FEI Visualization Sciences Group
</I>&gt;<i> 
</I>&gt;<i> 16700 Park Row Dr. Houston, Texas 77084 USA
</I>&gt;<i> 
</I>&gt;<i> T &#43;1 630 687 0215 fei.com
</I>&gt;<i> 
</I>&gt;<i> Explore. Discover. Resolve.
</I>&gt;<i> 
</I>&gt;<i> 
</I>&gt;<i> 
</I>&gt;<i> From: <A HREF="http://scif.io/mailman/listinfo/scifio">ctrueden.wisc at gmail.com</A> [mailto:<A HREF="http://scif.io/mailman/listinfo/scifio">ctrueden.wisc at gmail.com</A>] On Behalf Of Curtis Rueden
</I>&gt;<i> Sent: Tuesday, July 21, 2015 16:08
</I>&gt;<i> To: Voinson, Teddy; Wietholt, Christian
</I>&gt;<i> Cc: Combaret, Nicolas; SCIFIO
</I>&gt;<i> Subject: Re: Your visit and Bioformats
</I>&gt;<i> 
</I>&gt;<i> 
</I>&gt;<i> 
</I>&gt;<i> Hi Teddy &amp; Christian,
</I>&gt;<i> 
</I>&gt;<i> 
</I>&gt;<i> 
</I>&gt;<i> 
</I>&gt;<i> Teddy Voinson wrote:
</I>&gt;<i> 
</I>&gt;<i> 
</I>&gt;<i> &gt; I am currently working on interfacing Amira with SCIFIO using the ITK4
</I>&gt;<i> 
</I>&gt;<i> 
</I>&gt;<i> &gt; bridge that you mentioned
</I>&gt;<i> 
</I>&gt;<i> 
</I>&gt;<i> 
</I>&gt;<i> 
</I>&gt;<i> 
</I>&gt;<i> 
</I>&gt;<i> Very glad to hear it is useful!
</I>&gt;<i> 
</I>&gt;<i> 
</I>&gt;<i> 
</I>&gt;<i> 
</I>&gt;<i> 
</I>&gt;<i> I mentioned the ITK bridge as an example of how to interface Bio-Formats and/or SCIFIO with native C&#43;&#43; code. But I did not intend to imply that it would meet your use case &quot;out of the box.&quot; It uses pipes and is surprisingly fast, and the code is not too complex, so it serves as a nice example of how to integrate Java with non-Java using pipes.
</I>&gt;<i> 
</I>&gt;<i> 
</I>&gt;<i> 
</I>&gt;<i> 
</I>&gt;<i> 
</I>&gt;<i> You have a few different options here for how to improve the code to suit your needs:
</I>&gt;<i> 
</I>&gt;<i> 
</I>&gt;<i> 
</I>&gt;<i> 
</I>&gt;<i> 
</I>&gt;<i> 1) Fork scifio-itk-bridge and scifio-imageio, then hack them to match your use case.
</I>&gt;<i> 
</I>&gt;<i> 
</I>&gt;<i> 
</I>&gt;<i> 
</I>&gt;<i> 
</I>&gt;<i> 2) Generalize scifio-itk-bridge so that the C&#43;&#43; side has more control over the &quot;info&quot; command [1]. This could be as simple as adding a new command e.g. &quot;info-verbose&quot; that includes more metadata fields. It would do no harm to add this to the Java side, even if ITK doesn't use it, if it makes the Java library usable for you without further modifications.
</I>&gt;<i> 
</I>&gt;<i> 
</I>&gt;<i> 
</I>&gt;<i> 
</I>&gt;<i> 
</I>&gt;<i> If you opt for option 2, you are warmly welcome to submit a PR on GitHub [2] containing the changes you need. And if you require technical assistance with any details, we are happy to help.
</I>&gt;<i> 
</I>&gt;<i> 
</I>&gt;<i> 
</I>&gt;<i> 
</I>&gt;<i> 
</I>&gt;<i> Christian Wietholt wrote:
</I>&gt;<i> 
</I>&gt;<i> 
</I>&gt;<i> &gt; We were wondering if you know of any trick that could give us access
</I>&gt;<i> 
</I>&gt;<i> 
</I>&gt;<i> &gt; to all the header information through the ITK bridge, e.g. a pointer
</I>&gt;<i> 
</I>&gt;<i> 
</I>&gt;<i> &gt; to the headers of all TIFF files in a data set. Do you think that the
</I>&gt;<i> 
</I>&gt;<i> 
</I>&gt;<i> &gt; ITK bridge is capable of this, or do you have a different suggestion?
</I>&gt;<i> 
</I>&gt;<i> 
</I>&gt;<i> 
</I>&gt;<i> 
</I>&gt;<i> 
</I>&gt;<i> 
</I>&gt;<i> Adding support for delivering that information across the pipe would be very easy on the Java side, since Bio-Formats certainly knows which TIFF files belong to the dataset.
</I>&gt;<i> 
</I>&gt;<i> 
</I>&gt;<i> 
</I>&gt;<i> 
</I>&gt;<i> 
</I>&gt;<i> However, the next issue then becomes how you are consuming that information the C&#43;&#43; side. It sounds like your software is actually using ITK. Simplest then might be to simply add more key/value pairs to the dictionary which is passed across the pipe and stored in the ITK image [3]. If we do that, then you would require zero changes on the C&#43;&#43; side&#8212;only additions on the Java side as discussed above. And then your own C&#43;&#43; code would extract the values of interest from the ITK object's dictionary.
</I>&gt;<i> 
</I>&gt;<i> 
</I>&gt;<i> 
</I>&gt;<i> 
</I>&gt;<i> 
</I>&gt;<i> But if you are only using ITK because that's what scifio-imageio provides, you may want to consider crafting your own C&#43;&#43; &quot;client&quot; which communicates with the scifio-itk-bridge &quot;server&quot; in its own way, for maximum flexibility.
</I>&gt;<i> 
</I>&gt;<i> 
</I>&gt;<i> 
</I>&gt;<i> 
</I>&gt;<i> 
</I>&gt;<i> I have CCed the SCIFIO mailing list, which includes Mark Hiner, the primary author and maintainer of the SCIFIO ITK bridge components. Perhaps he will have additional thoughts and suggestions that I missed.
</I>&gt;<i> 
</I>&gt;<i> 
</I>&gt;<i> 
</I>&gt;<i> 
</I>&gt;<i> 
</I>&gt;<i> Regards,
</I>&gt;<i> 
</I>&gt;<i> 
</I>&gt;<i> Curtis
</I>&gt;<i> 
</I>&gt;<i> 
</I>&gt;<i> 
</I>&gt;<i> 
</I>&gt;<i> [1] <A HREF="https://github.com/scifio/scifio-itk-bridge/blob/3d47613686be450d4a672992fb499793cf4d480e/src/main/java/io/scif/itk/SCIFIOITKBridge.java#L250-L379">https://github.com/scifio/scifio-itk-bridge/blob/3d47613686be450d4a672992fb499793cf4d480e/src/main/java/io/scif/itk/SCIFIOITKBridge.java#L250-L379</A>
</I>&gt;<i> 
</I>&gt;<i> 
</I>&gt;<i> 
</I>&gt;<i> 
</I>&gt;<i> 
</I>&gt;<i> [2] <A HREF="http://imagej.net/GitHub">http://imagej.net/GitHub</A>
</I>&gt;<i> 
</I>&gt;<i> 
</I>&gt;<i> 
</I>&gt;<i> 
</I>&gt;<i> 
</I>&gt;<i> [3] <A HREF="https://github.com/scifio/scifio-imageio/blob/9346dbbf30b64645ebd9546fbf82f5438dc88a48/src/itkSCIFIOImageIO.cxx.in#L752-L754">https://github.com/scifio/scifio-imageio/blob/9346dbbf30b64645ebd9546fbf82f5438dc88a48/src/itkSCIFIOImageIO.cxx.in#L752-L754</A>
</I>&gt;<i> 
</I>&gt;<i> 
</I>&gt;<i> 
</I>&gt;<i> 
</I>&gt;<i> On Tue, Jul 21, 2015 at 2:59 PM, Wietholt, Christian &lt;<A HREF="http://scif.io/mailman/listinfo/scifio">Christian.Wietholt at fei.com</A>(javascript:main.compose()&gt; wrote:
</I>&gt;<i> 
</I>&gt;<i> The main problem right now is the header information of OME TIFF files that is stored in:
</I>&gt;<i> 
</I>&gt;<i> 
</I>&gt;<i> 
</I>&gt;<i> &lt;OME:TiffData IFD=&quot;0&quot; FirstZ=&quot;0&quot; FirstT=&quot;0&quot; FirstC=&quot;0&quot; /&gt;
</I>&gt;<i> 
</I>&gt;<i> 
</I>&gt;<i> 
</I>&gt;<i> This information does not seem to be transmitted through the bridge using the &#8216;ReadImageInformation&#8217; function, and we are relying solely on the file names to sort the order of slices, channels and time steps. I think this is okay at the moment for the z information, but can certainly cause issues when using 4D or 5D images and a none standard file naming scheme. Thus, we would prefer access to the above header information. In addition, we typically try to import all relevant header information into Amira and try to add as much information to the data object in Amira as possible. We typically do this in form of parameter bundles that are stored in the header of the Amira Mesh file. This will give access to all information about the file to Amira users.
</I>&gt;<i> 
</I>&gt;<i> 
</I>&gt;<i> 
</I>&gt;<i> Teddy and Nicolas mentioned to me that the 8 or 9 functions in the ITK bridge only provide access to the information that Teddy listed in his email. We were wondering if you know of any trick that could give us access to all the header information through the ITK bridge, e.g. a pointer to the headers of all TIFF files in a data set. Do you think that the ITK bridge is capable of this, or do you have a different suggestion?
</I>&gt;<i> 
</I>&gt;<i> 
</I>&gt;<i> 
</I>&gt;<i> I would greatly appreciate your input on this.
</I>&gt;<i> 
</I>&gt;<i> 
</I>&gt;<i> 
</I>&gt;<i> Many Thanks,
</I>&gt;<i> 
</I>&gt;<i> 
</I>&gt;<i> 
</I>&gt;<i> Christian
</I>&gt;<i> 
</I>&gt;<i> 
</I>&gt;<i> 
</I>&gt;<i> 
</I>&gt;<i> 
</I>&gt;<i> 
</I>&gt;<i> 
</I>&gt;<i> Christian Wietholt, Ph.D. | Product Manager, Life Sciences
</I>&gt;<i> 
</I>&gt;<i> FEI Visualization Sciences Group
</I>&gt;<i> 
</I>&gt;<i> 16700 Park Row Dr. Houston, Texas 77084 USA
</I>&gt;<i> 
</I>&gt;<i> T &#43;1 630 687 0215 fei.com(<A HREF="http://fei.com/">http://fei.com/</A>)
</I>&gt;<i> 
</I>&gt;<i> Explore. Discover. Resolve.
</I>&gt;<i> 
</I>&gt;<i> 
</I>&gt;<i> 
</I>&gt;<i> 
</I>&gt;<i> 
</I>&gt;<i> 
</I>&gt;<i> 
</I>&gt;<i> On Mon, Jul 20, 2015 at 12:21 PM, Voinson, Teddy &lt;<A HREF="http://scif.io/mailman/listinfo/scifio">Teddy.Voinson at fei.com</A>(javascript:main.compose()&gt; wrote:
</I>&gt;<i> 
</I>&gt;<i> Hi,
</I>&gt;<i> 
</I>&gt;<i> 
</I>&gt;<i> 
</I>&gt;<i> I am one of the developer of Amira and I am following Christian message to let you know that I am currently working on interfacing Amira with SCIFIO using the ITK4 bridge that you mentioned when you visited us.
</I>&gt;<i> 
</I>&gt;<i> I am using the itk 4.7.2 bridge in order to read OME-TIFF file format and I am probably doing something wrong.
</I>&gt;<i> 
</I>&gt;<i> You can probably help me.
</I>&gt;<i> 
</I>&gt;<i> 
</I>&gt;<i> 
</I>&gt;<i> Currently, using the ITK bridge, I can get some file information with the SCIFIOImageIO::ReadImageInformation().
</I>&gt;<i> 
</I>&gt;<i> I join an example image to this message.
</I>&gt;<i> 
</I>&gt;<i> On the example image, I get only:
</I>&gt;<i> 
</I>&gt;<i> Interleaved
</I>&gt;<i> 
</I>&gt;<i> 0
</I>&gt;<i> 
</I>&gt;<i> LittleEndian
</I>&gt;<i> 
</I>&gt;<i> 1
</I>&gt;<i> 
</I>&gt;<i> PixelType
</I>&gt;<i> 
</I>&gt;<i> 3
</I>&gt;<i> 
</I>&gt;<i> SizeX
</I>&gt;<i> 
</I>&gt;<i> 1344
</I>&gt;<i> 
</I>&gt;<i> SizeY
</I>&gt;<i> 
</I>&gt;<i> 1024
</I>&gt;<i> 
</I>&gt;<i> SizeZ
</I>&gt;<i> 
</I>&gt;<i> 1
</I>&gt;<i> 
</I>&gt;<i> SizeT
</I>&gt;<i> 
</I>&gt;<i> 1
</I>&gt;<i> 
</I>&gt;<i> SizeC
</I>&gt;<i> 
</I>&gt;<i> 1
</I>&gt;<i> 
</I>&gt;<i> RGBChannelCount
</I>&gt;<i> 
</I>&gt;<i> 1
</I>&gt;<i> 
</I>&gt;<i> PixelsPhysicalSizeX
</I>&gt;<i> 
</I>&gt;<i> 1.027921E-4
</I>&gt;<i> 
</I>&gt;<i> PixelsPhysicalSizeY
</I>&gt;<i> 
</I>&gt;<i> 1.027921E-4
</I>&gt;<i> 
</I>&gt;<i> PixelsPhysicalSizeZ
</I>&gt;<i> 
</I>&gt;<i> 1.244898E-4
</I>&gt;<i> 
</I>&gt;<i> PixelsPhysicalSizeT
</I>&gt;<i> 
</I>&gt;<i> 1.0
</I>&gt;<i> 
</I>&gt;<i> PixelsPhysicalSizeC
</I>&gt;<i> 
</I>&gt;<i> 1.0
</I>&gt;<i> 
</I>&gt;<i> UseLUT
</I>&gt;<i> 
</I>&gt;<i> False
</I>&gt;<i> 
</I>&gt;<i> Which is clearly not the complete header of the file (which is also attached to the email).
</I>&gt;<i> 
</I>&gt;<i> 
</I>&gt;<i> 
</I>&gt;<i> Do you have any clue on how to get the other information of the header?
</I>&gt;<i> 
</I>&gt;<i> Thanks in advance,
</I>&gt;<i> 
</I>&gt;<i> 
</I>&gt;<i> 
</I>&gt;<i> Teddy
</I>
--
Kevin W. Eliceiri
Director,&#160;Laboratory for Optical and Computational Instrumentation (LOCI)
Departments Cell and Molecular Biology and Biomedical Engineering
Director Medical Engineering, Morgridge Institute for Research (MIR)
Room 271 Animal Sciences,&#160;1675 Observatory Drive,&#160;Madison, WI 53706
Phone: 608-263-6288

</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="000269.html">[SCIFIO] Your visit and Bioformats
</A></li>
	<LI>Next message: <A HREF="000268.html">[SCIFIO] Your visit and Bioformats
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#270">[ date ]</a>
              <a href="thread.html#270">[ thread ]</a>
              <a href="subject.html#270">[ subject ]</a>
              <a href="author.html#270">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://scif.io/mailman/listinfo/scifio">More information about the SCIFIO
mailing list</a><br>
</body></html>
